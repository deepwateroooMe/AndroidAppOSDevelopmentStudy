#+latex_class: book
#+title: Android Coding Assessment Test Prepare
#+author: deepwaterooo

* Activityç”Ÿå‘½å‘¨æœŸæ¢è®¨
- https://www.jianshu.com/p/1b3f829810a1

  [[./pic/activityLifeCycle.png]]
** Activityç”Ÿå‘½å‘¨æœŸç›¸å…³å‡½æ•°è¯´æ˜
- (1) onCreate()æ˜¯activityæ­£åœ¨è¢«åˆ›å»ºï¼Œä¹Ÿå°±æ˜¯è¯´æ­¤æ—¶çš„UIæ“ä½œä¸ä¼šæ›´æ–°UIï¼Œæ¯”å¦‚setText()æ“ä½œï¼Œæ‰€ä»¥æ­¤æ—¶åœ¨å­çº¿ç¨‹è°ƒç”¨setText()ä¸ä¼šæŠ¥çº¿ç¨‹é”™è¯¯ã€‚è¯¦è§£å¯è§Androidå­çº¿ç¨‹æ›´æ–°Viewçš„æ¢ç´¢,åœ¨è¿™ä¸ªæ–¹æ³•å†…æˆ‘ä»¬å¯ä»¥åšä¸€äº›åˆå§‹åŒ–å·¥ä½œã€‚
- (2) onRestart()éœ€è¦æ³¨æ„çš„æ˜¯ï¼šactivityæ­£åœ¨é‡æ–°å¯åŠ¨ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œactivityä»ä¸å¯è§çŠ¶æ€åˆ°å¯è§çŠ¶æ€ï¼ŒonRestart()æ‰ä¼šè¢«è°ƒç”¨ï¼Œä½†æ˜¯ä¸€å®šè¦æ³¨æ„çš„æ˜¯ä¸€èˆ¬æ¥è¯´è¿™æ˜¯ç”¨æˆ·è¡Œä¸ºå¯¼è‡´activityä¸å¯è§çš„æ—¶å€™ï¼Œæ­¤æ—¶å˜ä¸ºå¯è§çš„æ—¶å€™æ‰ä¼šè°ƒç”¨onRestart(),è¿™é‡Œæ‰€è¯´çš„ç”¨æˆ·è¡Œä¸ºå°±æ˜¯ç”¨æˆ·æŒ‰homeé”®ï¼Œæˆ–è€…è¿›å…¥â€œæ–°â€çš„activityã€‚è¿™æ ·çš„æ“ä½œä¼šä½¿activityå…ˆæ‰§è¡ŒonPause(),åæ‰§è¡ŒonStop()ï¼Œè¿™æ ·å›åˆ°è¿™ä¸ªactivityä¼šè°ƒç”¨onRestart()ã€‚ä¸ºä»€ä¹ˆæˆ‘è¿™é‡Œå¼ºè°ƒè¯´ç”¨æˆ·è¡Œä¸ºå¯¼è‡´çš„ä¸å¯è§çŠ¶æ€ï¼Œç­‰ä¸‹æˆ‘ä¼šè¯´ã€‚ã€‚ã€‚ã€‚
- (3) onStart()çš„æ—¶å€™ï¼Œactivityæ‰å¯è§ï¼Œä½†æ˜¯æ²¡æœ‰å‡ºç°åœ¨å‰å°ï¼Œæ— æ³•ä¸ç”¨æˆ·äº¤äº’
- (4) onResume()çš„æ—¶å€™ï¼Œactivityå·²ç»å¯è§ï¼Œå¹¶ä¸”å‡ºç°åœ¨å‰å°å¼€å§‹æ´»åŠ¨ï¼Œä¸onStart()ç›¸æ¯”ï¼Œactivityéƒ½å·²ç»å¯è§ï¼Œä½†æ˜¯onStart()çš„æ—¶å€™activityè¿˜åœ¨åå°ï¼ŒonResume()æ‰æ˜¾ç¤ºåœ¨å‰å°
- (5) onPause()ä¸»è¦æ³¨æ„çš„æ˜¯ï¼šæ­¤æ—¶çš„activityæ­£åœ¨è¢«åœæ­¢ï¼Œæ¥ä¸‹æ¥é©¬ä¸Šè°ƒç”¨onStop()ã€‚ç‰¹æ®Šæƒ…å†µä¸‹å¿«é€Ÿå›åˆ°è¯¥activityï¼ŒonStop()ä¸ä¼šæ‰§è¡Œï¼Œä¼šå»æ‰§è¡ŒonResume()ã€‚
  - _ä¸€èˆ¬åœ¨è¿™ä¸ªç”Ÿå‘½å‘¨æœŸå†…åšå­˜å‚¨æ•°æ®ã€åœæ­¢åŠ¨ç”»å·¥ä½œï¼Œä½†ä¸èƒ½å¤ªè€—æ—¶ã€‚_
  - ä¸ºä»€ä¹ˆç‰¹æ®Šå¼ºè°ƒå‘¢ï¼Œå› ä¸ºè¯¥activityçš„onPause()æ‰§è¡Œå®Œäº†ï¼Œæ‰å›å»æ‰§è¡Œæ–°çš„activityçš„onResume()ï¼Œä¸€æ—¦è€—æ—¶ï¼Œå¿…ç„¶ä¼šæ‹–æ…¢æ–°çš„activityçš„æ˜¾ç¤ºã€‚
- (6) onStop()ï¼šæ­¤æ—¶çš„activityå³å°†åœæ­¢ã€‚åœ¨è¿™é‡Œå¯ä»¥åšç¨å¾®é‡é‡çº§çš„æ“ä½œï¼ŒåŒæ ·ä¹Ÿä¸èƒ½è€—æ—¶ã€‚
- (7) onDestroy()ï¼šæ­¤æ—¶çš„activityå³å°†è¢«å›æ”¶ï¼Œåœ¨è¿™é‡Œä¼šåšä¸€äº›å›æ”¶å·¥ä½œå’Œæœ€ç»ˆèµ„æºé‡Šæ”¾ã€‚
*** åœ¨è¿™é‡Œç€é‡è®²è§£ä¸€ä¸‹onStartä¸onResumeï¼ŒonPauseä¸onStopåŒºåˆ«
onStartä¸onResumeä¸¤ç§çŠ¶æ€è™½éƒ½å¯è§ï¼Œä½†onStartæ—¶è¿˜æ— æ³•ä¸ç”¨æˆ·äº¤äº’ï¼Œå¹¶æœªè·å¾—ç„¦ç‚¹ã€‚onResumeæ—¶é¡µé¢å·²è·å¾—ç„¦ç‚¹ï¼Œå¯ä¸ç”¨æˆ·äº¤äº’ï¼›onPauseæ—¶é¡µé¢è¿˜åœ¨å‰å°ï¼Œåªä¸è¿‡é¡µé¢å·²å¤±å»ç„¦ç‚¹ï¼Œæ— æ³•ä¸ç”¨æˆ·äº¤äº’äº†ï¼ŒonStopæ—¶å·²ä¸å¯è§äº†ã€‚
    
    [[./pic/states.png]]

activityå››ä¸ªçŠ¶æ€æ‰€åœ¨çš„ç”Ÿå‘½å‘¨æœŸï¼š

- RunningçŠ¶æ€ï¼šä¸€ä¸ªæ–°çš„Activityå¯åŠ¨å…¥æ ˆåï¼Œå®ƒåœ¨å±å¹•æœ€å‰ç«¯ï¼Œå¤„äºæ ˆçš„æœ€é¡¶ç«¯ï¼Œæ­¤æ—¶å®ƒå¤„äºå¯è§å¹¶å¯å’Œç”¨æˆ·äº¤äº’çš„æ¿€æ´»çŠ¶æ€ã€‚
- PausedçŠ¶æ€ï¼šä¾æ—§åœ¨ç”¨æˆ·å¯è§çŠ¶æ€ï¼Œä½†æ˜¯ç•Œé¢ç„¦ç‚¹å·²ç»å¤±å»ï¼Œæ­¤Activityæ— æ³•ä¸ç”¨æˆ·è¿›è¡Œäº¤äº’ã€‚å½“Activityè¢«å¦ä¸€ä¸ªé€æ˜æˆ–è€…Dialogæ ·å¼çš„Activityè¦†ç›–æ—¶çš„çŠ¶æ€ã€‚æ­¤æ—¶å®ƒä¾ç„¶ä¸çª—å£ç®¡ç†å™¨ä¿æŒè¿æ¥ï¼Œç³»ç»Ÿç»§ç»­ç»´æŠ¤å…¶å†…éƒ¨çŠ¶æ€ï¼Œå®ƒä»ç„¶å¯è§ï¼Œä½†å®ƒå·²ç»å¤±å»äº†ç„¦ç‚¹ï¼Œæ•…ä¸å¯ä¸ç”¨æˆ·äº¤äº’ã€‚æ‰€ä»¥å°±è§£é‡Šä¸ºä»€ä¹ˆå¯åŠ¨ä¸€ä¸ªdialogActivityæˆ–è€…é€æ˜Activityæ—¶ï¼ŒåŸActivityåªæ‰§è¡Œäº†onPauseç”Ÿå‘½å‘¨æœŸï¼Œå¹¶æœªæ‰§è¡ŒonStop
- StoppedçŠ¶æ€ï¼šç”¨æˆ·çœ‹ä¸åˆ°å½“å‰ç•Œé¢,ä¹Ÿæ— æ³•ä¸ç”¨æˆ·è¿›è¡Œäº¤äº’ å®Œå…¨è¢«è¦†ç›–ã€‚å½“Activityä¸å¯è§æ—¶ï¼ŒActivityå¤„äºStoppedçŠ¶æ€ã€‚å½“Activityå¤„äºæ­¤çŠ¶æ€æ—¶ï¼Œä¸€å®šè¦ä¿å­˜å½“å‰æ•°æ®å’Œå½“å‰çš„UIçŠ¶æ€ï¼Œå¦åˆ™ä¸€æ—¦Activityé€€å‡ºæˆ–å…³é—­æ—¶ï¼Œå½“å‰çš„æ•°æ®å’ŒUIçŠ¶æ€å°±ä¸¢å¤±äº†ã€‚
- KilledçŠ¶æ€ï¼šActivityè¢«æ€æ‰ä»¥åæˆ–è€…è¢«å¯åŠ¨ä»¥å‰ï¼Œå¤„äºKilledçŠ¶æ€ã€‚è¿™æ˜¯Activityå·²ä»Activityå †æ ˆä¸­ç§»é™¤ï¼Œéœ€è¦é‡æ–°å¯åŠ¨æ‰å¯ä»¥æ˜¾ç¤ºå’Œä½¿ç”¨ã€‚
- 4ç§çŠ¶æ€ä¸­ï¼ŒRunningçŠ¶æ€å’ŒPausedçŠ¶æ€æ˜¯å¯è§çš„ï¼ŒStoppedçŠ¶æ€å’ŒKilledçŠ¶æ€æ—¶ä¸å¯è§çš„ã€‚
  
[[./pic/func.png]]

** Activityæ³¨æ„äº‹é¡¹
- Activityä¸­æ‰€æœ‰å’ŒçŠ¶æ€ç›¸å…³çš„å›è°ƒå‡½æ•°ï¼š

[[./pic/one.png]]

[[./pic/two.png]]

  [[./pic/activityLifecyleCallbacks.png]]

- åœ¨è¿™é‡Œæˆ‘ä¼šç‰¹åˆ«æå‡ºä¸€ä¸ªpointï¼Œå°±æ˜¯å¼‚å¸¸æƒ…å†µä¸‹activityè¢«æ€æ­»ï¼Œè€Œåè¢«é‡æ–°åˆ›å»ºçš„æƒ…å†µã€‚
  
  #+caption: å¼‚å¸¸æƒ…å†µä¸‹activityçš„é‡å»ºè¿‡ç¨‹
  [[./pic/recreateActivity.png]]

- è¿™å¼ å›¾éå¸¸é‡è¦ï¼Œå¯ä»¥å¸®æˆ‘ä»¬è§£å†³å¼‚å¸¸æƒ…å†µä¸‹activityå¦‚ä½•æ­£å¸¸å›å¤çš„é—®é¢˜
- å½“ç³»ç»Ÿåœæ­¢activityæ—¶ï¼Œå®ƒä¼šè°ƒç”¨onSaveInstanceState()(è¿‡ç¨‹1)ï¼Œå¦‚æœactivityè¢«é”€æ¯äº†ï¼Œä½†æ˜¯éœ€è¦åˆ›å»ºåŒæ ·çš„å®ä¾‹ï¼Œç³»ç»Ÿä¼šæŠŠè¿‡ç¨‹1ä¸­çš„çŠ¶æ€æ•°æ®ä¼ ç»™onCreate()å’ŒonRestoreInstanceState()ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åœ¨onSaveInstanceState()å†…åšä¿å­˜å‚æ•°çš„åŠ¨ä½œï¼Œåœ¨onRestoreInstanceState()åšè·å–å‚æ•°çš„åŠ¨ä½œã€‚
  #+BEGIN_SRC java
// Save Activity State
static final String STATE_SCORE = "playerScore";
static final String STATE_LEVEL = "playerLevel";
@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
    savedInstanceState.putInt(STATE_SCORE, mCurrentScore); // Save the user's current game state
    savedInstanceState.putInt(STATE_LEVEL, mCurrentLevel);
    super.onSaveInstanceState(savedInstanceState); // Always call the superclass so it can save the view hierarchy state
}
  #+END_SRC
- è·å–å‚æ•°æ“ä½œï¼š
  #+BEGIN_SRC java
// onCreate() æ–¹æ³•
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); // Always call the superclass first
    if (savedInstanceState != null) { // Check whether we're recreating a previously destroyed instance
        mCurrentScore = savedInstanceState.getInt(STATE_SCORE); // Restore value of members from saved state
        mCurrentLevel = savedInstanceState.getInt(STATE_LEVEL);
    } else  // Probably initialize members with default values for a new instance
}
  #+END_SRC
- ä¹Ÿå¯ä»¥
  #+BEGIN_SRC java
// onRestoreInstanceState()æ–¹æ³•
public void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState); // Always call the superclass so it can restore the view hierarchy
    mCurrentScore = savedInstanceState.getInt(STATE_SCORE); // Restore state members from saved instance
    mCurrentLevel = savedInstanceState.getInt(STATE_LEVEL);
}
  #+END_SRC

** ä¸€äº›ç‰¹æ®Šçš„æ–¹æ³•
*** onWindowFocusChanged()
- åœ¨Activityçª—å£è·å¾—æˆ–å¤±å»ç„¦ç‚¹æ—¶è¢«è°ƒç”¨å¹¶ä¸”å½“Activityè¢«åˆ›å»ºæ—¶æ˜¯åœ¨onResumeä¹‹åè¢«è°ƒç”¨ï¼Œå½“Activityè¢«è¦†ç›–æˆ–è€…é€€å±…åå°æˆ–è€…å½“å‰Activityé€€å‡ºæ—¶ï¼Œå®ƒæ˜¯åœ¨onPauseä¹‹åè¢«è°ƒç”¨ï¼ˆåœ¨è¿™ä¸ªæ–¹æ³•ä¸­å¯ä»¥viewå·²ç»ç»˜åˆ¶å®Œæˆï¼Œå¯ä»¥è·å–viewçš„å®½é«˜ç­‰å±æ€§ï¼‰
*** onSaveInstanceState()
- (1)åœ¨Activityè¢«è¦†ç›–æˆ–é€€å±…åå°ä¹‹åï¼Œç³»ç»Ÿèµ„æºä¸è¶³å°†å…¶æ€æ­»ï¼Œæ­¤æ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼›
- (2)åœ¨ç”¨æˆ·æ”¹å˜å±å¹•æ–¹å‘æ—¶ï¼Œæ­¤æ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼› 
- (3)åœ¨å½“å‰Activityè·³è½¬åˆ°å…¶ä»–Activityæˆ–è€…æŒ‰Homeé”®å›åˆ°ä¸»å±ï¼Œè‡ªèº«é€€å±…åå°æ—¶ï¼Œæ­¤æ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚
- ç¬¬ä¸€ç§æƒ…å†µæˆ‘ä»¬æ— æ³•ä¿è¯ä»€ä¹ˆæ—¶å€™å‘ç”Ÿï¼Œç³»ç»Ÿæ ¹æ®èµ„æºç´§å¼ ç¨‹åº¦å»è°ƒåº¦ï¼›
- ç¬¬äºŒç§æ˜¯å±å¹•ç¿»è½¬æ–¹å‘æ—¶ï¼Œç³»ç»Ÿå…ˆé”€æ¯å½“å‰çš„Activityï¼Œç„¶åå†é‡å»ºä¸€ä¸ªæ–°çš„ï¼Œè°ƒç”¨æ­¤æ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¿å­˜ä¸€äº›ä¸´æ—¶æ•°æ®ï¼›
- ç¬¬ä¸‰ç§æƒ…å†µç³»ç»Ÿè°ƒç”¨æ­¤æ–¹æ³•æ˜¯ä¸ºäº†ä¿å­˜å½“å‰çª—å£å„ä¸ªViewç»„ä»¶çš„çŠ¶æ€ã€‚
- onSaveInstanceStateçš„è°ƒç”¨é¡ºåºæ˜¯åœ¨onstopä¹‹å‰ã€‚ï¼ˆandroid3.0ä¹‹å‰ï¼šåœ¨onPauseä¹‹å‰è°ƒç”¨ï¼Œåœ¨3.0ä¹‹åï¼Œåœ¨onPauseä¹‹åè°ƒç”¨ï¼‰
*** onRestoreInstanceState()
- æœ‰çš„äººè¯´è¿™ä¸ªæ–¹æ³•å’ŒonSaveInstanceStateæ˜¯ä¸€å¯¹ï¼Œå…¶å®ä¸ç„¶ï¼Œ
- (1)åœ¨Activityè¢«è¦†ç›–æˆ–é€€å±…åå°ä¹‹åï¼Œç³»ç»Ÿèµ„æºä¸è¶³å°†å…¶æ€æ­»ï¼Œç„¶åç”¨æˆ·åˆå›åˆ°äº†æ­¤Activityï¼Œæ­¤æ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼›
- (2)åœ¨ç”¨æˆ·æ”¹å˜å±å¹•æ–¹å‘æ—¶ï¼Œé‡å»ºçš„è¿‡ç¨‹ä¸­ï¼Œæ­¤æ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚
- æˆ‘ä»¬å¯ä»¥é‡å†™æ­¤æ–¹æ³•ï¼Œä»¥ä¾¿å¯ä»¥æ¢å¤ä¸€äº›ä¸´æ—¶æ•°æ®ã€‚
- onRestoreInstanceStateçš„è°ƒç”¨é¡ºåºæ˜¯åœ¨onStartä¹‹åã€‚
- åœ¨å½“å‰Activityè·³è½¬åˆ°å…¶ä»–Activityæˆ–è€…æŒ‰Homeé”®å›åˆ°ä¸»å±ï¼Œè‡ªèº«é€€å±…åå°æ—¶ï¼šonRestoreInstanceStateä¸ä¼šè°ƒç”¨ï¼Œä½†æ˜¯onSaveInstanceStateä¼šè°ƒç”¨ï¼Œè¿™ç‚¹å°±æ˜¯åŒºåˆ«
*** æ³¨æ„ä¸€ä¸‹ä¸¤ä¸ªå‡½æ•°åœ¨ç”Ÿå‘½å‘¨æœŸä¸­çš„è°ƒç”¨é¡ºåº
#+BEGIN_SRC java
onCreate()
onStart()
onSaveInstanceState()
onResume()
onPause()
onRestoreInstanceState()
onStop()
onDestory()
#+END_SRC
** æœ€åçš„æ€»ç»“
- å½“Activityè¢«ç³»ç»Ÿæ’¤é”€åé‡æ–°å»ºç«‹æ—¶ï¼Œä¿å­˜ä»¥åŠæ¢å¤æ•°æ®çš„å‡½æ•°è°ƒç”¨é¡ºåºæ˜¯ï¼š
  - onSaveInstanceState(ä¿å­˜æ•°æ®) ----> onCreate(æ¢å¤æ•°æ®allstate) ----> onRestoryInstanceState(æ¢å¤æ•°æ®HierarchyState)
- å¦‚æœè¦å–æ¶ˆåˆ‡æ¢å±å¹•æ–¹æ³•é‡å»ºactivityï¼Œå¯ä»¥é…ç½®configChangeså±æ€§ï¼šå½“æ”¯æŒçš„æœ€å°sdkç‰ˆæœ¬å¤§äºandroid4.0éœ€è¦è®¾ç½®è¿™ä¸ªå±æ€§ï¼‰
  #+BEGIN_SRC java
android:configChanges="keyboardHidden|orientation|screenSizeï¼ˆå½“æ”¯æŒçš„æœ€å°sdkç‰ˆæœ¬å¤§äºandroid4.0éœ€è¦è®¾ç½®è¿™ä¸ªå±æ€§ï¼‰"
  #+END_SRC

** ä»–äººæ€»ç»“
- æ¨ªç«–å±åˆ‡æ¢æ—¶ Activity çš„ç”Ÿå‘½å‘¨æœŸ
1ã€ä¸è®¾ç½® Activity çš„ android:configChanges æ—¶ï¼Œåˆ‡å±ä¼šé‡æ–°è°ƒç”¨å„ä¸ªç”Ÿå‘½å‘¨æœŸ é»˜è®¤é¦–å…ˆé”€æ¯å½“å‰ activityï¼Œç„¶åé‡æ–°åŠ è½½ã€‚å¦‚ä¸‹å›¾ï¼Œå½“æ¨ªç«–å±åˆ‡æ¢æ—¶å…ˆæ‰§è¡Œ onPause/onStop æ–¹æ³•
#+BEGIN_SRC java
onPause()
onStop()
onCreate()
onStart()
onResume()
#+END_SRC
2ã€è®¾ç½® Activity çš„ android:configChanges="orientation|keyboardHidden|screenSize"æ—¶ï¼Œåˆ‡å±ä¸ä¼šé‡æ–°è°ƒ ç”¨å„ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåªä¼šæ‰§è¡Œ onConfigurationChanged æ–¹æ³•ã€‚

- https://juejin.im/post/5a18f58651882531bb6c82e2
- 1. æ‰“å¼€ä¸€ä¸ªå…¨æ–°çš„activityAï¼š
  - onCreate() ----> onStart() ----> onResume()
- 2. ä»activity A ----> activity Bï¼ˆå…¨å±ï¼‰ï¼š
  - activity A å…ˆæ‰§è¡Œ: onPause()
  - ç„¶åactivity Bæ‰§è¡Œ: onCreate() ----> onStart() ----> onResume()
  - activity A å†æ‰§è¡Œ: onStop()
- 3. ä»activity A ----> activity Bï¼ˆéå…¨å±ï¼‰ï¼š
  - activity Aå…ˆæ‰§è¡Œ: onPause()
  - ç„¶åactivity Bæ‰§è¡Œ: onCreate() ----> onStart() ----> onResume()
  - *activity Aä¸ä¼šæ‰§è¡ŒonStop()*
- 4. activity Bï¼ˆå…¨å±ï¼‰è¿”å›åˆ° activity Aï¼š
  - activity B å…ˆæ‰§è¡Œ: onPause()
  - activity A: onRestart ----> onStart() ----> onResume()
  - activity Bå†æ‰§è¡Œ: onStop() ----> onDestory()
- 5. activity Bï¼ˆéå…¨å±ï¼‰è¿”å›åˆ°activity A 
  - activity Bå…ˆæ‰§è¡Œ: onPause()
  - activity A: onResume()
  - activity Bå†æ‰§è¡Œ: onStop() ----> onDestory()
- 6. activity Bè¿”å›åˆ°activity Aï¼š
  - å¦‚æœactivityAå·²ç»è¢«é”€æ¯ï¼ŒactivityAä¼šé‡æ–°åˆ›å»ºï¼Œæ‰§è¡Œ: onCreate() ----> onStart() ----> onResume()
  - activityBçš„æµç¨‹ä¸å˜
- 7. activity AæŒ‰homeé”®é€€å±…åå°ï¼š
  - åŒ2çš„æµç¨‹: onPause()
- 8. å†ä»homeè¿”å›åˆ°activity A
  - åŒ4çš„æµç¨‹: onRestart ----> onStart() ----> onResume()
** activityä¹‹é—´çš„æ•°æ®ä¼ é€’ï¼š 6ç§æ–¹å¼
*** ä½¿ç”¨Intençš„putExtraä¼ é€’
- ç¬¬ä¸€ä¸ªActivityä¸­
    #+BEGIN_SRC java
    Intent intent = new Intent(this,TwoActivity.class);
    intent.putExtra("data",str);
    startActivity(intent);
    #+END_SRC
- ç¬¬äºŒä¸ªActivity
    #+BEGIN_SRC java
    Intent intent = getIntent();
    String str = intent.getStringExtra("data");
    tv.setText(str);
    #+END_SRC
*** ä½¿ç”¨Intentionçš„Bundleä¼ é€’
- ç¬¬ä¸€ä¸ªActivityä¸­
    #+BEGIN_SRC java
    Intent intent = new Intent(MainActivity.this,TwoActivity.class);
    Bundle bundle = new Bundle();
    bundle.putString("data", str);
    intent.putExtra("bun", bundle);
    startActivity(intent);
    #+END_SRC
- ç¬¬äºŒä¸ªActivity
    #+BEGIN_SRC java
    Intent intent = getIntent();
    Bundle bundle = intent.getBundleExtra("bun");
    String str = bundle.getString("data");
    tv.setText(str);
    #+END_SRC
*** ä½¿ç”¨Activityé”€æ¯æ—¶ä¼ é€’æ•°æ®
- ç¬¬ä¸€ä¸ªActivityä¸­
    #+BEGIN_SRC java
    Intent intent = new Intent(MainActivity.this,TwoActivity.class);
    startActivityForResult(intent, 11);
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        String str = data.getStringExtra("data");
        tvOne.setText(str);
    }
    #+END_SRC
- ç¬¬äºŒä¸ªActivity
    #+BEGIN_SRC java
    Intent intent = new Intent();
    intent.putExtra("data", edtOne.getText().toString().trim());
    setResult(3, intent);
    finish();
    #+END_SRC
*** SharedPreferencesä¼ é€’æ•°æ®
- ç¬¬ä¸€ä¸ªActivityä¸­
    #+BEGIN_SRC java
SharedPreferences sp = this.getSharedPreferences("info", 1);
Editor edit = sp.edit();
edit.putString("data", str);
edit.commit();
Intent intent = new Intent(MainActivity.this,TwoActivity.class);
startActivity(intent);
    #+END_SRC
- ç¬¬äºŒä¸ªActivity
    #+BEGIN_SRC java
SharedPreferences sp = this.getSharedPreferences("info", 1);
tv.setText(sp.getString("data", ""));
    #+END_SRC
*** ä½¿ç”¨åºåˆ—åŒ–å¯¹è±¡Seriazable
- è¿™é‡Œéœ€è¦å»ºä¸€ä¸ªå·¥å…·ç±»
#+BEGIN_SRC java
import java.io.Serializable;
class DataBean implements Serializable {
    private String name;
    private String sex;
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getSex() {
        return sex;
    }
    public void setSex(String sex) {
        this.sex = sex;
    }
}
#+END_SRC
- ç¬¬ä¸€ä¸ªActivityä¸­
    #+BEGIN_SRC java
Intent intent = new Intent(MainActivity.this,TwoActivity.class);
DataBean bean = new DataBean();
bean.setName("å•¦å•¦");
bean.setSex("ç”·");
intent.putExtra("key", bean);
startActivity(intent);
    #+END_SRC
- ç¬¬äºŒä¸ªActivity
    #+BEGIN_SRC java
Intent intent = getIntent();
//ååºåˆ—åŒ–æ•°æ®å¯¹è±¡
Serializable se = intent.getSerializableExtra("key");
if(se instanceof DataBean){
    //è·å–åˆ°æºå¸¦æ•°æ®çš„DataBeanå¯¹è±¡db
    DataBean db = (DataBean) se;
    tv.setText(db.getName()+"==="+db.getSex());
}
    #+END_SRC
*** ä½¿ç”¨é™æ€å˜é‡ä¼ é€’æ•°æ®
- ç¬¬ä¸€ä¸ªActivityä¸­
    #+BEGIN_SRC java
Intent intent = new Intent(MainActivity.this,TwoActivity.class);
TwoActivity.name="ç‰›é€¼";
TwoActivity.str="ä½ è¯´";
startActivity(intent);
    #+END_SRC
- ç¬¬äºŒä¸ªActivity
    #+BEGIN_SRC java
protected static String name;
protected static String str;
tv.setText(str+name);
    #+END_SRC
*** å‰ªåˆ‡æ¿ï¼Œç¨å
- ç¬¬ä¸€ä¸ªActivityä¸­
    #+BEGIN_SRC java
ClipboardManager clipboardManager = (ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE);
String name = "AHuier";
clipboardManager.setText(name);
Intent intent = new Intent(IntentDemo.this, Other.class);
startActivity(intent);
    #+END_SRC
- ç¬¬äºŒä¸ªActivity
    #+BEGIN_SRC java
ClipboardManager clipboardManager = (ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE);
String msgString = clipboardManager.getText().toString();
textView.setText(msgString);
    #+END_SRC
- åˆ©ç”¨å‰ªåˆ‡æ¿ä¼ é€’å¤æ‚çš„æ•°æ®ï¼Œå¦‚å¯¹è±¡ï¼Œç•¥

* Fragmentç”Ÿå‘½å‘¨æœŸæ¢è®¨
   #+caption: Fragmentç”Ÿå‘½å‘¨æœŸæ¢è®¨

 [[./pic/fragmentlifecycle.png]]
   #+caption: Fragmentä¸Activityç”Ÿå‘½å‘¨æœŸå¯¹æ¯”å›¾

 [[./pic/lifecyclecompare.png]]

- FragmentåŸºæœ¬ç±»ï¼Œç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹ï¼š
  #+BEGIN_SRC java
void onAttach(Context context)
void onCreate(Bundle savedInstanceState)
View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
void onActivityCreated(Bundle savedInstanceState)
void onStart()
void onResume()
void onPause()
void onStop()
void onDestroyView()
void onDestroy()
void onDetach()
  #+END_SRC

** é¦–å…ˆéœ€è¦æå‡ºçš„ä¸€äº›pointsï¼š
- Fragmentæ˜¯ç›´æ¥ä»Objectç»§æ‰¿çš„ï¼Œè€ŒActivityæ˜¯Contextçš„å­ç±»ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼šFragmentä¸æ˜¯Activityçš„æ‰©å±•ã€‚ä½†æ˜¯ä¸Activityä¸€æ ·ï¼Œåœ¨æˆ‘ä»¬ä½¿ç”¨Fragmentçš„æ—¶å€™æˆ‘ä»¬æ€»ä¼šæ‰©å±•Fragment(æˆ–è€…æ˜¯å¥¹çš„å­ç±»)ï¼Œå¹¶å¯ä»¥é€šè¿‡å­ç±»æ›´æ”¹å¥¹çš„è¡Œä¸ºã€‚
- ä½¿ç”¨Fragmentæ—¶ï¼Œå¿…è¦æ„å»ºä¸€ä¸ªæ— å‚æ„é€ å‡½æ•°ï¼Œç³»ç»Ÿä¼šé»˜è®¤å¸¦ã€‚ä½†ä¸€ä½†å†™æœ‰å‚æ„é€ å‡½æ•°ï¼Œå°±å¿…è¦æ„å»ºæ— å‚æ„é€ å‡½æ•°ã€‚ä¸€èˆ¬æ¥è¯´æˆ‘ä»¬ä¼ å‚æ•°ç»™Fragmentï¼Œä¼šé€šè¿‡bundleï¼Œè€Œä¸ä¼šç”¨æ„é€ æ–¹æ³•ä¼ ï¼Œä»£ç å¦‚ä¸‹ï¼š
  #+BEGIN_SRC java
public static MyFragment newInstance(int index){  
    MyFragment mf = new MyFragment();  
    Bundle args = new Bundle();  
    args.putInt("index",index);  
    mf.setArguments(args);  
    return mf;  
} 
  #+END_SRC
** ç”Ÿå‘½å‘¨æœŸ
- onAttach()ï¼šonAttach()å›è°ƒå°†åœ¨Fragmentä¸å…¶Activityå…³è”ä¹‹åè°ƒç”¨ã€‚éœ€è¦ä½¿ç”¨Activityçš„å¼•ç”¨æˆ–è€…ä½¿ç”¨Activityä½œä¸ºå…¶ä»–æ“ä½œçš„ä¸Šä¸‹æ–‡ï¼Œå°†åœ¨æ­¤å›è°ƒæ–¹æ³•ä¸­å®ç°ã€‚
  - å°†Fragmenté™„åŠ åˆ°Activityä»¥åï¼Œå°±æ— æ³•å†æ¬¡è°ƒç”¨setArguments()--é™¤äº†åœ¨æœ€å¼€å§‹ï¼Œæ— æ³•å‘åˆå§‹åŒ–å‚æ•°æ·»åŠ å†…å®¹ã€‚
- onCreate(Bundle savedInstanceState)ï¼šæ­¤æ—¶çš„Fragmentçš„onCreate()å›è°ƒæ—¶ï¼Œè¯¥fragmetè¿˜æ²¡æœ‰è·å¾—Activityçš„onCreate()å·²å®Œæˆçš„é€šçŸ¥ï¼Œæ‰€ä»¥ä¸èƒ½å°†ä¾èµ–äºActivityè§†å›¾å±‚æ¬¡ç»“æ„å­˜åœ¨æ€§çš„ä»£ç æ”¾å…¥æ­¤å›è°ƒæ–¹æ³•ä¸­ã€‚åœ¨onCreate()å›è°ƒæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡é¿å…è€—æ—¶æ“ä½œã€‚æ­¤æ—¶çš„bundleå°±å¯ä»¥è·å–åˆ°activityä¼ æ¥çš„å‚æ•°
  #+BEGIN_SRC java
@Override
public void onCreate(Bundle savedInstanceState) {  
        super.onCreate(savedInstanceState);  
        Bundle args = getArguments();  
        if (args != null) {  
            mLabel = args.getCharSequence("label", mLabel);  
        }  
    }  
  #+END_SRC
- onCreateView()
  #+BEGIN_SRC java
onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
  #+END_SRC
  - å…¶ä¸­çš„Bundleä¸ºçŠ¶æ€åŒ…ä¸ä¸Šé¢çš„bundleä¸ä¸€æ ·ã€‚
  - ä¸è¦å°†è§†å›¾å±‚æ¬¡ç»“æ„é™„åŠ åˆ°ä¼ å…¥çš„ViewGroupçˆ¶å…ƒç´ ä¸­ï¼Œè¯¥å…³è”ä¼šè‡ªåŠ¨å®Œæˆã€‚å¦‚æœåœ¨æ­¤å›è°ƒä¸­å°†ç¢ç‰‡çš„è§†å›¾å±‚æ¬¡ç»“æ„é™„åŠ åˆ°çˆ¶å…ƒç´ ï¼Œå¾ˆå¯èƒ½ä¼šå‡ºç°å¼‚å¸¸ã€‚
  - è¿™å¥è¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå°±æ˜¯ä¸è¦æŠŠåˆå§‹åŒ–çš„viewè§†å›¾ä¸»åŠ¨æ·»åŠ åˆ°containeré‡Œé¢ï¼Œä»¥ä¸ºè¿™ä¼šç³»ç»Ÿè‡ªå¸¦ï¼Œæ‰€ä»¥inflateå‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•°å¿…é¡»å¡«falseï¼Œè€Œä¸”ä¸èƒ½å‡ºç°container.addView(v)çš„æ“ä½œã€‚
  #+BEGIN_SRC java
View v = inflater.inflate(R.layout.hello_world, container, false);
  #+END_SRC
- onActivityCreated()
  - onActivityCreated()å›è°ƒä¼šåœ¨Activityå®Œæˆå…¶onCreate()å›è°ƒä¹‹åè°ƒç”¨ã€‚åœ¨è°ƒç”¨onActivityCreated()ä¹‹å‰ï¼ŒActivityçš„è§†å›¾å±‚æ¬¡ç»“æ„å·²ç»å‡†å¤‡å¥½äº†ï¼Œè¿™æ˜¯åœ¨ç”¨æˆ·çœ‹åˆ°ç”¨æˆ·ç•Œé¢ä¹‹å‰ä½ å¯å¯¹ç”¨æˆ·ç•Œé¢æ‰§è¡Œçš„æœ€åè°ƒæ•´çš„åœ°æ–¹ã€‚
  - å¦‚æœActivityå’Œå¥¹çš„Fragmentæ˜¯ä»ä¿å­˜çš„çŠ¶æ€é‡æ–°åˆ›å»ºçš„ï¼Œæ­¤å›è°ƒå°¤å…¶é‡è¦ï¼Œä¹Ÿå¯ä»¥åœ¨è¿™é‡Œç¡®ä¿æ­¤Activityçš„å…¶ä»–æ‰€æœ‰Fragmentå·²ç»é™„åŠ åˆ°è¯¥Activityä¸­äº†
- Fragmentä¸Activityç›¸åŒç”Ÿå‘½å‘¨æœŸè°ƒç”¨ï¼šæ¥ä¸‹æ¥çš„onStart(), onResume(), onPause(), onStop()å›è°ƒæ–¹æ³•å°†å’ŒActivityçš„å›è°ƒæ–¹æ³•è¿›è¡Œç»‘å®šï¼Œä¹Ÿå°±æ˜¯è¯´ä¸Activityä¸­å¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸç›¸åŒï¼Œå› æ­¤ä¸åšè¿‡å¤šä»‹ç»ã€‚
- onDestroyView():è¯¥å›è°ƒæ–¹æ³•åœ¨è§†å›¾å±‚æ¬¡ç»“æ„ä¸Fragmentåˆ†ç¦»ä¹‹åè°ƒç”¨ã€‚
- onDestroy()ï¼šä¸å†ä½¿ç”¨Fragmentæ—¶è°ƒç”¨ã€‚(å¤‡æ³¨ï¼šFragmentä»ç„¶é™„åŠ åˆ°Activityå¹¶ä»»ç„¶å¯ä»¥æ‰¾åˆ°ï¼Œä½†æ˜¯ä¸èƒ½æ‰§è¡Œå…¶ä»–æ“ä½œ)
- onDetach()ï¼šFragmentç”Ÿå‘½å‘¨æœŸæœ€åå›è°ƒå‡½æ•°ï¼Œè°ƒç”¨åï¼ŒFragmentä¸å†ä¸Activityç»‘å®šï¼Œé‡Šæ”¾èµ„æºã€‚

** Fragmentæ¯ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„æ„ä¹‰ã€ä½œç”¨
- onAttach()
  - æ‰§è¡Œè¯¥æ–¹æ³•æ—¶ï¼ŒFragmentä¸Activityå·²ç»å®Œæˆç»‘å®šï¼Œè¯¥æ–¹æ³•æœ‰ä¸€ä¸ªActivityç±»å‹çš„å‚æ•°ï¼Œä»£è¡¨ç»‘å®šçš„Activityï¼Œè¿™æ—¶å€™ä½ å¯ä»¥æ‰§è¡Œè¯¸å¦‚mActivity = activityçš„æ“ä½œã€‚
- onCreate()
  - åˆå§‹åŒ–Fragmentã€‚å¯é€šè¿‡å‚æ•°savedInstanceStateè·å–ä¹‹å‰ä¿å­˜çš„å€¼ã€‚
- onCreateView()
  - åˆå§‹åŒ–Fragmentçš„å¸ƒå±€ã€‚åŠ è½½å¸ƒå±€å’ŒfindViewByIdçš„æ“ä½œé€šå¸¸åœ¨æ­¤å‡½æ•°å†…å®Œæˆï¼Œä½†æ˜¯ä¸å»ºè®®æ‰§è¡Œè€—æ—¶çš„æ“ä½œï¼Œæ¯”å¦‚è¯»å–æ•°æ®åº“æ•°æ®åˆ—è¡¨ã€‚
- onActivityCreated()
  - æ‰§è¡Œè¯¥æ–¹æ³•æ—¶ï¼Œä¸Fragmentç»‘å®šçš„Activityçš„onCreateæ–¹æ³•å·²ç»æ‰§è¡Œå®Œæˆå¹¶è¿”å›ï¼Œåœ¨è¯¥æ–¹æ³•å†…å¯ä»¥è¿›è¡Œä¸Activityäº¤äº’çš„UIæ“ä½œï¼Œæ‰€ä»¥åœ¨è¯¥æ–¹æ³•ä¹‹å‰Activityçš„onCreateæ–¹æ³•å¹¶æœªæ‰§è¡Œå®Œæˆï¼Œå¦‚æœæå‰è¿›è¡Œäº¤äº’æ“ä½œï¼Œä¼šå¼•å‘ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚
- onStart()
  - æ‰§è¡Œè¯¥æ–¹æ³•æ—¶ï¼ŒFragmentç”±ä¸å¯è§å˜ä¸ºå¯è§çŠ¶æ€ã€‚
- onResume()
  - æ‰§è¡Œè¯¥æ–¹æ³•æ—¶ï¼ŒFragmentå¤„äºæ´»åŠ¨çŠ¶æ€ï¼Œç”¨æˆ·å¯ä¸ä¹‹äº¤äº’ã€‚
- onPause()
  - æ‰§è¡Œè¯¥æ–¹æ³•æ—¶ï¼ŒFragmentå¤„äºæš‚åœçŠ¶æ€ï¼Œä½†ä¾ç„¶å¯è§ï¼Œç”¨æˆ·ä¸èƒ½ä¸ä¹‹äº¤äº’ã€‚
- onSaveInstanceState()
  - ä¿å­˜å½“å‰Fragmentçš„çŠ¶æ€ã€‚è¯¥æ–¹æ³•ä¼šè‡ªåŠ¨ä¿å­˜Fragmentçš„çŠ¶æ€ï¼Œæ¯”å¦‚EditTexté”®å…¥çš„æ–‡æœ¬ï¼Œå³ä½¿Fragmentè¢«å›æ”¶åˆé‡æ–°åˆ›å»ºï¼Œä¸€æ ·èƒ½æ¢å¤EditTextä¹‹å‰é”®å…¥çš„æ–‡æœ¬ã€‚
- onStop()
  - æ‰§è¡Œè¯¥æ–¹æ³•æ—¶ï¼ŒFragmentå®Œå…¨ä¸å¯è§ã€‚
- onDestroyView()
  - é”€æ¯ä¸Fragmentæœ‰å…³çš„è§†å›¾ï¼Œä½†æœªä¸Activityè§£é™¤ç»‘å®šï¼Œä¾ç„¶å¯ä»¥é€šè¿‡onCreateViewæ–¹æ³•é‡æ–°åˆ›å»ºè§†å›¾ã€‚é€šå¸¸åœ¨ViewPager+Fragmentçš„æ–¹å¼ä¸‹ä¼šè°ƒç”¨æ­¤æ–¹æ³•ã€‚
- onDestroy()
  - é”€æ¯Fragmentã€‚é€šå¸¸æŒ‰Backé”®é€€å‡ºæˆ–è€…Fragmentè¢«å›æ”¶æ—¶è°ƒç”¨æ­¤æ–¹æ³•ã€‚
- onDetach()
  - è§£é™¤ä¸Activityçš„ç»‘å®šã€‚åœ¨onDestroyæ–¹æ³•ä¹‹åè°ƒç”¨ã€‚
- setUserVisibleHint()
  - è®¾ç½®Fragmentå¯è§æˆ–è€…ä¸å¯è§æ—¶ä¼šè°ƒç”¨æ­¤æ–¹æ³•ã€‚åœ¨è¯¥æ–¹æ³•é‡Œé¢å¯ä»¥é€šè¿‡è°ƒç”¨getUserVisibleHint()è·å¾—Fragmentçš„çŠ¶æ€æ˜¯å¯è§è¿˜æ˜¯ä¸å¯è§çš„ï¼Œå¦‚æœå¯è§åˆ™è¿›è¡Œæ‡’åŠ è½½æ“ä½œã€‚
** Fragmentç”Ÿå‘½å‘¨æœŸæ‰§è¡Œæµç¨‹
- 1ã€Fragmentåˆ›å»º
  - setUserVisibleHint() ----> onAttach() ----> onCreate() ----> onCreateView() ----> onActivityCreated() ----> onStart() ----> onResume()
- 2ã€Fragmentå˜ä¸ºä¸å¯è§çŠ¶æ€ï¼ˆé”å±ã€å›åˆ°æ¡Œé¢ã€è¢«Activityå®Œå…¨è¦†ç›–ï¼‰
  - onPause() ----> onSaveInstanceState() ----> onStop()
- 3ã€Fragmentå˜ä¸ºéƒ¨åˆ†å¯è§çŠ¶æ€ï¼ˆæ‰“å¼€Dialogæ ·å¼çš„Activityï¼‰
  - onPause() ----> onSaveInstanceState()
- 4ã€Fragmentç”±ä¸å¯è§å˜ä¸ºæ´»åŠ¨çŠ¶æ€
  - onStart() ----> OnResume()
- 5ã€Fragmentç”±éƒ¨åˆ†å¯è§å˜ä¸ºæ´»åŠ¨çŠ¶æ€
  - onResume()
- 6ã€Fragmenté€€å‡º
  - onPause() ----> onStop() ----> onDestroyView() ----> onDestroy() ----> onDetach()
  - ï¼ˆæ³¨æ„é€€å‡ºä¸ä¼šè°ƒç”¨onSaveInstanceStateæ–¹æ³•ï¼Œå› ä¸ºæ˜¯äººä¸ºé€€å‡ºï¼Œæ²¡æœ‰å¿…è¦å†ä¿å­˜æ•°æ®ï¼‰
- 7ã€Fragmentè¢«å›æ”¶åˆé‡æ–°åˆ›å»º
  - è¢«å›æ”¶æ‰§è¡Œ: onPause() ----> onSaveInstanceState() ----> onStop() ----> onDestroyView() ----> onDestroy() ----> onDetach()
  - é‡æ–°åˆ›å»ºæ‰§è¡Œ: onAttach() ----> onCreate() ----> onCreateView() ----> onActivityCreated() ----> onStart() ----> onResume() ----> setUserVisibleHint()
- æ¨ªç«–å±åˆ‡æ¢
  - ä¸Fragmentè¢«å›æ”¶åˆé‡æ–°åˆ›å»ºä¸€æ ·ã€‚
** onHiddenChangedçš„å›è°ƒæ—¶æœº
- å½“ä½¿ç”¨add()+show()ï¼Œhide()è·³è½¬æ–°çš„Fragmentæ—¶ï¼Œæ—§çš„Fragmentå›è°ƒonHiddenChanged()ï¼Œä¸ä¼šå›è°ƒonStop()ç­‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œè€Œæ–°çš„Fragmentåœ¨åˆ›å»ºæ—¶æ˜¯ä¸ä¼šå›è°ƒonHiddenChanged()ï¼Œè¿™ç‚¹è¦åˆ‡è®°ã€‚
** FragmentPagerAdapter+ViewPagerçš„æ³¨æ„äº‹é¡¹
- 1ã€ ä½¿ç”¨FragmentPagerAdapter+ViewPageræ—¶ï¼Œåˆ‡æ¢å›ä¸Šä¸€ä¸ªFragmenté¡µé¢æ—¶ï¼ˆå·²ç»åˆå§‹åŒ–å®Œæ¯•ï¼‰ï¼Œä¸ä¼šå›è°ƒä»»ä½•ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä»¥åŠonHiddenChanged()ï¼Œåªæœ‰setUserVisibleHint(boolean isVisibleToUser)ä¼šè¢«å›è°ƒï¼Œæ‰€ä»¥å¦‚æœä½ æƒ³è¿›è¡Œä¸€äº›æ‡’åŠ è½½ï¼Œéœ€è¦åœ¨è¿™é‡Œå¤„ç†ã€‚
- 2ã€ åœ¨ç»™ViewPagerç»‘å®šFragmentPagerAdapteræ—¶ï¼Œnew FragmentPagerAdapter(fragmentManager)çš„FragmentManagerï¼Œä¸€å®šè¦ä¿è¯æ­£ç¡®ï¼Œå¦‚æœViewPageræ˜¯Activityå†…çš„æ§ä»¶ï¼Œåˆ™ä¼ é€’getSupportFragmentManager()ï¼Œå¦‚æœæ˜¯Fragmentçš„æ§ä»¶ä¸­ï¼Œåˆ™åº”è¯¥ä¼ é€’getChildFragmentManager()ã€‚åªè¦è®°ä½ViewPagerå†…çš„Fragmentsæ˜¯å½“å‰ç»„ä»¶çš„å­Fragmentè¿™ä¸ªåŸåˆ™å³å¯ã€‚
- 3ã€ ä½ ä¸éœ€è¦è€ƒè™‘åœ¨â€œå†…å­˜é‡å¯â€çš„æƒ…å†µä¸‹ï¼Œå»æ¢å¤çš„Fragmentsçš„é—®é¢˜ï¼Œå› ä¸ºFragmentPagerAdapterå·²ç»å¸®æˆ‘ä»¬å¤„ç†å•¦ã€‚
** setUserVisibleHint()ä¸è°ƒç”¨çš„é—®é¢˜
- é€šå¸¸æƒ…å†µä¸‹éƒ½æ˜¯å› ä¸ºPagerAdapterä¸æ˜¯FragmentPagerAdapteré€ æˆçš„ï¼ŒFragmentPagerAdapterå†…éƒ¨å®ç°äº†å¯¹setUserVisibleHint()æ–¹æ³•çš„è°ƒç”¨ï¼Œæ‰€ä»¥éœ€è¦æ‡’åŠ è½½çš„ç»“æ„æœ€å¥½ä½¿ç”¨FragmentPagerAdapter +Fragmentçš„ç»“æ„ï¼Œå°‘ç”¨PagerAdapterã€‚

** Fragmentæ³¨æ„äº‹é¡¹
- åœ¨ä½¿ç”¨Fragmentæ—¶ï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªé‡‘çŸ¿ï¼Œé‚£å°±æ˜¯setRetainInstance()æ–¹æ³•,æ­¤æ–¹æ³•å¯ä»¥æœ‰æ•ˆåœ°æé«˜ç³»ç»Ÿçš„è¿è¡Œæ•ˆç‡ï¼Œå¯¹æµç•…æ€§è¦æ±‚è¾ƒé«˜çš„åº”ç”¨å¯ä»¥é€‚å½“é‡‡ç”¨æ­¤æ–¹æ³•è¿›è¡Œè®¾ç½®ã€‚
- Fragmentæœ‰ä¸€ä¸ªéå¸¸å¼ºå¤§çš„åŠŸèƒ½--å°±æ˜¯å¯ä»¥åœ¨Activityé‡æ–°åˆ›å»ºæ—¶å¯ä»¥ä¸å®Œå…¨é”€æ¯Fragmentï¼Œä»¥ä¾¿Fragmentå¯ä»¥æ¢å¤ã€‚åœ¨onCreate()æ–¹æ³•ä¸­è°ƒç”¨setRetainInstance(true/false)æ–¹æ³•æ˜¯æœ€ä½³ä½ç½®ã€‚å½“Fragmentæ¢å¤æ—¶çš„ç”Ÿå‘½å‘¨æœŸå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ³¨æ„å›¾ä¸­çš„çº¢è‰²ç®­å¤´ã€‚å½“åœ¨onCreate()æ–¹æ³•ä¸­è°ƒç”¨äº†setRetainInstance(true)åï¼ŒFragmentæ¢å¤æ—¶ä¼šè·³è¿‡onCreate()å’ŒonDestroy()æ–¹æ³•ï¼Œå› æ­¤ä¸èƒ½åœ¨onCreate()ä¸­æ”¾ç½®ä¸€äº›åˆå§‹åŒ–é€»è¾‘.

* Android Fragment ç”Ÿå‘½å‘¨æœŸå›¾
- http://www.cnblogs.com/purediy/p/3276545.html
- Fragmentä¸Activityç”Ÿå‘½å‘¨æœŸå¯¹æ¯”å›¾ï¼š

** ç”Ÿå‘½å‘¨æœŸåˆ†æ
*** å½“ä¸€ä¸ªfragmentè¢«åˆ›å»ºçš„æ—¶å€™(å®ƒä¼šç»å†ä»¥ä¸‹çŠ¶æ€)
- onAttach()
- onCreate()
- onCreateView()
- onActivityCreated()
*** å½“è¿™ä¸ªfragmentå¯¹ç”¨æˆ·å¯è§çš„æ—¶å€™
- onStart()
- onResume()
*** å½“è¿™ä¸ªfragmentè¿›å…¥â€œåå°æ¨¡å¼â€çš„æ—¶å€™
- onPause()
- onStop()
*** å½“è¿™ä¸ªfragmentè¢«é”€æ¯äº†ï¼ˆæˆ–è€…æŒæœ‰å®ƒçš„activityè¢«é”€æ¯äº†ï¼‰
- onPause()
- onStop()
- onDestroyView()
- onDestroy() // æœ¬æ¥æ¼æ‰ç±»è¿™ä¸ªå›è°ƒï¼Œæ„Ÿè°¢xiangxue336æå‡ºã€‚
- onDetach()
*** å°±åƒactivityä¸€æ ·ï¼Œåœ¨ä»¥ä¸‹çš„çŠ¶æ€ä¸­ï¼Œå¯ä»¥ä½¿ç”¨Bundleå¯¹è±¡ä¿å­˜ä¸€ä¸ªfragmentçš„å¯¹è±¡ã€‚
- onCreate()
- onCreateView()
- onActivityCreated()
*** fragmentsçš„å¤§éƒ¨åˆ†çŠ¶æ€éƒ½å’Œactivityå¾ˆç›¸ä¼¼ï¼Œä½†fragmentæœ‰ä¸€äº›æ–°çš„çŠ¶æ€ã€‚
- onAttached() -- å½“fragmentè¢«åŠ å…¥åˆ°activityæ—¶è°ƒç”¨ï¼ˆåœ¨è¿™ä¸ªæ–¹æ³•ä¸­å¯ä»¥è·å¾—æ‰€åœ¨çš„activityï¼‰ã€‚
- onCreateView() -- å½“activityè¦å¾—åˆ°fragmentçš„layoutæ—¶ï¼Œè°ƒç”¨æ­¤æ–¹æ³•ï¼Œfragmentåœ¨å…¶ä¸­åˆ›å»ºè‡ªå·±çš„layout(ç•Œé¢)ã€‚
- onActivityCreated() -- å½“activityçš„onCreated()æ–¹æ³•è¿”å›åè°ƒç”¨æ­¤æ–¹æ³•
- onDestroyView() -- å½“fragmentä¸­çš„è§†å›¾è¢«ç§»é™¤çš„æ—¶å€™ï¼Œè°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚
- onDetach() -- å½“fragmentå’Œactivityåˆ†ç¦»çš„æ—¶å€™ï¼Œè°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚
- Notes:
  - ä¸€æ—¦activityè¿›å…¥resumedçŠ¶æ€ï¼ˆä¹Ÿå°±æ˜¯runningçŠ¶æ€ï¼‰ï¼Œä½ å°±å¯ä»¥è‡ªç”±åœ°æ·»åŠ å’Œåˆ é™¤fragmentäº†ã€‚
  - å› æ­¤ï¼Œåªæœ‰å½“activityåœ¨resumedçŠ¶æ€æ—¶ï¼Œfragmentçš„ç”Ÿå‘½å‘¨æœŸæ‰èƒ½ç‹¬ç«‹çš„è¿è½¬ï¼Œå…¶å®ƒæ—¶å€™æ˜¯ä¾èµ–äºactivityçš„ç”Ÿå‘½å‘¨æœŸå˜åŒ–çš„ã€‚


* activity lifecycle
*** Activityæ¨ªç«–å±åˆ‡æ¢ç”Ÿå‘½å‘¨æœŸå˜åŒ–
**** æ–°å»ºä¸€ä¸ªActivityï¼Œå¹¶æŠŠå„ä¸ªç”Ÿå‘½å‘¨æœŸæ‰“å°å‡ºæ¥
onCreate,
åˆ›å»ºactivityæ—¶è°ƒç”¨ã€‚è®¾ç½®åœ¨è¯¥æ–¹æ³•ä¸­ï¼Œè¿˜ä»¥Bundleä¸­å¯ä»¥æå‡ºç”¨äºåˆ›å»ºè¯¥ Activity æ‰€éœ€çš„ä¿¡æ¯ã€‚
onStart,
activityå˜ä¸ºåœ¨å±å¹•ä¸Šå¯¹ç”¨æˆ·å¯è§æ—¶ï¼Œå³è·å¾—ç„¦ç‚¹æ—¶ï¼Œä¼šè°ƒç”¨ã€‚
onResume,
activityå¼€å§‹ä¸ç”¨æˆ·äº¤äº’æ—¶è°ƒç”¨ï¼ˆæ— è®ºæ˜¯å¯åŠ¨è¿˜æ˜¯é‡æ–°å¯åŠ¨ä¸€ä¸ªæ´»åŠ¨ï¼Œè¯¥æ–¹æ³•æ€»æ˜¯è¢«è°ƒç”¨çš„ï¼‰
onSaveInstanceState
onPause,
activityè¢«æš‚åœæˆ–æ”¶å›cpuå’Œå…¶ä»–èµ„æºæ—¶è°ƒç”¨ï¼Œè¯¥æ–¹æ³•ç”¨äºä¿å­˜æ´»åŠ¨çŠ¶æ€çš„
onStop,
activityè¢«åœæ­¢å¹¶è½¬ä¸ºä¸å¯è§é˜¶æ®µåŠåç»­çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶æ—¶ï¼Œå³å¤±å»ç„¦ç‚¹æ—¶è°ƒç”¨
onDestroy,
activityè¢«å®Œå…¨ä»ç³»ç»Ÿå†…å­˜ä¸­ç§»é™¤æ—¶è°ƒç”¨ï¼Œè¯¥æ–¹æ³•è¢«è°ƒç”¨å¯èƒ½æ˜¯å› ä¸ºæœ‰äººç›´æ¥è°ƒç”¨ finish()æ–¹æ³• æˆ–è€…ç³»ç»Ÿå†³å®šåœæ­¢è¯¥æ´»åŠ¨ä»¥é‡Šæ”¾èµ„æºã€‚
onRestoreInstanceState,
Androidåœ¨æ¨ªç«–æ’åˆ‡æ¢æ—¶å€™ï¼Œå°†ä¸»åŠ¨é”€æ¯activityå’Œé‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„activityå‡ºæ¥ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­ï¼ŒonRestoreInstanceStateå°±è¦è¢«å›è°ƒ
onConfigurationChanged,
é…ç½®æŒ‡å®šå±æ€§å,å±å¹•æ–¹å‘å‘ç”Ÿå˜åŒ–åå›è°ƒæ­¤å‡½æ•°.
**** è¿è¡ŒActivityï¼Œå¾—åˆ°å¦‚ä¸‹ä¿¡æ¯
#+BEGIN_SRC java
onCreate  -->
onStart  -->
onResume  -->
#+END_SRC
**** æŒ‰crtl+f12åˆ‡æ¢æˆæ¨ªå±æ—¶
#+BEGIN_SRC java
onPause  -->
onStop  -->
onDestroy  -->
onCreate  -->
onStart  -->
onRestoreInstanceState  -->
onResume  -->
#+END_SRC
**** å†æŒ‰crtl+f12åˆ‡æ¢æˆç«–å±æ—¶ï¼Œå‘ç°åˆæ‰“å°äº†ç›¸åŒçš„log
#+BEGIN_SRC java
onPause  -->
onStop  -->
onDestroy  -->
onCreate  -->
onStart  -->
onRestoreInstanceState  -->
onResume  -->
#+END_SRC
**** ä¿®æ”¹AndroidManifest.xml
æŠŠè¯¥Activityæ·»åŠ 
#+BEGIN_SRC java
android:configChanges="orientation"ï¼Œ
#+END_SRC
æ‰§è¡Œæ­¥éª¤3(åˆ‡æ¢æˆæ¨ªå±æ—¶)
#+BEGIN_SRC java
onPause  -->
onStop  -->
onDestroy  -->
onCreate  -->
onStart  -->
onRestoreInstanceState  -->
onResume  -->
#+END_SRC
**** å†æ‰§è¡Œæ­¥éª¤4(åˆ‡æ¢ç«–å±)ï¼Œå‘ç°å†æ‰“å°ç›¸åŒä¿¡æ¯
#+BEGIN_SRC java
onPause  -->
onStop  -->
onDestroy  -->
onCreate  -->
onStart  -->
onRestoreInstanceState  -->
onResume  -->
#+END_SRC

*** Why do developers often put app initialization code in the Application class?
- The Application class is instantiated before any other class when the process for the application is created.

* fragmnet
*** What are Retained Fragments?
- By default, Fragments are destroyed and recreated along with their parent Activityâ€™s when a configuration change occurs.
- Calling setRetainInstance(true) allows us to bypass this destroy-and-recreate cycle, signaling the system to retain the current instance of the fragment when the activity is recreated.

*** How would you communicate between two Fragments?

All Fragment-to-Fragment communication is done either through a shared ViewModel or through the associated Activity. Two Fragments should never communicate directly.

- The recommended way to communicate between fragments is to create a shared ViewModel object. Both fragments can access the ViewModel through their containing Activity. The Fragments can update data within the ViewModel and if the data is exposed using LiveData the new state will be pushed to the other fragment as long as it is observing the LiveData from the ViewModel.
#+BEGIN_SRC java
public class SharedViewModel extends ViewModel {
    private final MutableLiveData <Item> selected = new MutableLiveData < Item > ();
    public void select(Item item) {
        selected.setValue(item);
    }
    public LiveData <Item> getSelected() {
        return selected;
    }
}
public class MasterFragment extends Fragment {
    private SharedViewModel model;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        model = ViewModelProviders.of(getActivity()).get(SharedViewModel.class);
        itemSelector.setOnClickListener(item -> {
                model.select(item);
            });
    }
}
public class DetailFragment extends Fragment {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        SharedViewModel model = ViewModelProviders.of(getActivity()).get(SharedViewModel.class);
        model.getSelected().observe(this, {
                item ->
                    // Update the UI.
                    // model.select(item); // è¿™è¡Œå……å½“å ä½ç¬¦ï¼Œå¤åˆ¶çš„ä¸Šé¢çš„
                    });
    }
}
#+END_SRC
- Another way is to define an interface in your Fragment A, and let your Activity implement that Interface. Now you can call the interface method in your Fragment, and your Activity will receive the event. Now in your activity, you can call your second Fragment to update the textview with the received value.

** transaction stack backstack
*** What is the chief purpose of line five in this code snippet?
#+BEGIN_SRC java
override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(R.layout.activity_post_create)
	if (savedInstanceState != null) return
	val fragment = CreatePostFragment()
		supportFragmentManager
		.beginTransaction()
		.add(R.id. fragment_container, fragment)
		.commit()
}
#+END_SRC
- to make sure that the activity creates a new fragment each time it is restored from a previous state

* View
** What should you use to display a large, scrolling list of elements?
- Recycler View

** Given the fragment below, how would you get access to a TextView with an ID of text_home contained in the layout file of a Fragment class?
   #+BEGIN_SRC java
    private lateinit var textView: TextView
    override fun onCreateView(...): View? {
        val root = inflator.inflator(R>layout.fragment_home, container, false)
        textView = ??
        return root
    }
// root.findViewById(R.id.text_home)
   #+END_SRC  
   

* Intent
** You have created a NextActivity class that relies on a string containing some data that pass inside the intent Which code snippet allows you to launch your activity?
#+BEGIN_SRC java
Intent(this, NextActivity::class.java).apply {
    putExtra(EXTRA_NEXT, "some data")
}.also { intent ->
    startActivity(intent)
}
#+END_SRC
** You have created an AboutActivity class that displays details about your app. Which code snippet allows you to launch your activity?
#+BEGIN_SRC java
Intent(this, AboutActivity::class.java).also { 
    intent -> startActivity(intent) 
}
#+END_SRC
** Which definition will prevent other apps from accessing your Activity class via an intent?
#+BEGIN_SRC java
<activity android:name=".ExampleActivity" />
#+END_SRC
- Intent filters are used to make activities accessible to other apps using intents. So we have to choose option which have no intent filter to make sure it is not accessible by intent
** You want to allow users to take pictures in your app. Which is not an advantage of creating an appropriate intent, instead of requesting the camera permission directly?
- Users can select their favorite photo apps to take pictures.
- You do not have to make a permission request in your app to take a picture.
- You do not have to design the UI. The app that handles the camera intent will provide the UI.
- You have full control over the user experience. The app that handles the camera intent will respect your design choices. (ANSWER)

** onActivityResult()
- When will an activity's onActivityResult()be called?
  -  when calling finish() in the target activity
** startActivityWithResult(): You want to open the default Dialer app on a device. What is wrong with this code?
#+BEGIN_SRC java
val dialerIntent = Intent()
val et = findViewById(R.id.some_edit_text)
dialerIntent.action = Intent.ACTION_DIAL
dialerIntent.data = Uri.parse("tel:" + et.getText()?.toString())
startActivity(dialerIntent) // <--
#+END_SRC
- startActivityWithResult() should be used instead of startActivity() when using Intent.ACTION_DIAL.
     

* Data
** storage
*** To persist a small collection of key-value data, what should you use?
- SharedPereferences

*** What allows you to properly restore a user's state when an activity is restarted?
- the onSaveInstance()method
- persistent storage
- ViewModel objects
- all of these answers (Refrence) (ANSWER)
***  To preserve on-device memory, how might you determine that the user's device has limited storage capabilities?
#+BEGIN_SRC java
ActivityManager.isLowRamDevice() ;
#+END_SRC
- Use the ActivityManager.isLowRamDevice() method to find out whether a device defines itself as "low RAM."

** How would you retrieve the value of a user's email from SharedPreferences while ensuring that the returned value is not null?
   #+BEGIN_SRC java
  getDefaultSharedPreferances(this).getString(EMAIL,"")
   #+END_SRC
-  In Method "getDefaultSharedPrefarances(this).getString()" Second parameter is passed so that it can be returned, in case key doesn't exist. So we need to pass an empty string to be returned in case key doesn't exist.
   

* xml resource files
** layout
*** Which layout is best for large, complex hierarchies?
- ConstraintLayout

***  Which drawable definition allows you to achieve the shape below?
    
   [[./pic/circle.png]]

    #+BEGIN_SRC xml
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="oval">
<stroke
    android:width="4dp"
    android:color="@android:color/black" />
<solid android:color="@android:color/white" />
</shape>
    #+END_SRC   
*** Which image best corresponds to the following LinearLayout?
#+BEGIN_SRC xml
  <LinearLayout
      android:layout_width="match_parent"
	  android:layout_height="match_parent"
	  android:orientation="horizontal"
	  android:gravity="center">
	<Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />
	<Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />
  </LinearLayout>
#+END_SRC
- gravity="center"æ˜¯æè¿°çš„ç«–ç›´æ–¹å‘ä¸Šä½äºä¸­é—´ï¼Œè€Œæ°´å¹³æ–¹å‘ä¸ŠåŒæ ·ä¹Ÿæ˜¯ä½äºä¸­é—´ï¼Œæ¯ä¸ªé”®çš„å®½åº¦ç”±è‡ªèº«å†…å®¹çš„å®½åº¦å†³å®š
- gravity: todo
*** Which code snippet would achieve the layout displayed below?
   #+BEGIN_SRC java
<androidx.constraintlayout.widget.ConstraintLayout
	...>

	<TextView
		android:id="@+id/text_dashboard"
		android:layout_width="match_parent"
		android:layout_height="wrap_content"
		android:layout_marginStart="8dp"
		android:layout_marginEnd="8dp"
		android:textAlignment="center"
		android:text="Dashboard"
		app:layout_constraintEnd_toEndOf="parent"
		app:layout_constraintStart_toStartOf="parent"
		app:layout_constraintTop_toTopOf="parent" />

</androidx.constraintlayout.widget.ConstraintLayout>
   #+END_SRC
- å·¦å³å„ç•™8dp,æ–‡å­—ä¸­é—´å¯¹é½ï¼›æ–‡æœ¬æ¡†é«˜åº¦ç”±è‡ªèº«é«˜åº¦å†³å®šï¼›æ–‡æœ¬æ¡†å®½åº¦æ‹‰ä¼¸match_parent; 

*** å®ç°çŸ©å½¢ï¼Œå³ä¸‹è§’ç™½è‰²ï¼Œå·¦ä¸Šè§’é»‘è‰²çš„æ¸å˜æ•ˆæœ
#+BEGIN_SRC xml
  <shape xmlns:android-"http://schemas.android.com/apk/res/android"
  android:shape-"rectangle">
  <gradient
	  android:startColor-"@android:color/white"
	  android:endColor-"@android:color/black"
	  android:angle-"135"/>
	</shape>
#+END_SRC
*** Given the following dimens.xml file, how would you define an ImageView with medium spacing at the bottom?
#+BEGIN_SRC xml
<?xml version=1.0 encoding="utf-8"?>
<resources>
    <dimen name="spacing_medium">8dp</dimen>
    <dimen name="spacing_large">12dp</dimen>
</resources>
#+END_SRC
#+BEGIN_SRC xml
<ImageView
   android:id=@+id/image_map_pin"
   android:layout_width="wrap_content"
   android:layout_heignt="wrap_content"
   android:layout_marginBottom="@dimen/spacing_medium"
   android:src=@drawable/map_pin />
#+END_SRC
*** You want to provide a different drawable for devices that are in landscape mode and whose language is set to French. which directory is named correctly?
- drawable-fr-land
    
*** What folder should you use for your app's launcher icons?
- /mipmap
** permissions
*** å†™å¤–éƒ¨å­˜å‚¨æƒé™
#+BEGIN_SRC java
<uses-permission
     android:name="android.permission.WRITE_EXTERNAL_STORAGE"
     android:maxSdkVersion="18" />
#+END_SRC
*** When would you use the ActivityCompat.shouldShowRequestPermissionRationale() function?
    #+BEGIN_SRC java
ActivityCompat.shouldShowRequestPermissionRationale();
    #+END_SRC
-  when a user has previously denied the request for a given permission and selected "Don't ask again," but you need the permission for your app to function

*** Why might you need to include the following permission to your app?
#+BEGIN_SRC java
android.permission.ACCESS_NETWORK_STATE
#+END_SRC
- to monitor the network state of the devices so that you don't attempt to make network calls when the network is unavailable


* annotation
** @VisibleForTesting: 
-  to denote that a class, methos, or field has its visibility relaxed to make code testable
   

* apk
** basic
*** When would you use a product flavour in your build setup?
   when you want to provide different version of your app with custom configuration and resources
*** To shrink your code in release builds, what tool does Android Studio use?
- R8
** build configuration
*** Which statement, in build.gradle file, correctly denotes that the corresponding module is an Android library module?
#+BEGIN_SRC java
 apply plugin: 'com.android.library'
#+END_SRC
*** You would like to enable analytics tracking only in release builds. How can you create a new field in the generated BuildConfig class to store that value?
#+BEGIN_SRC java
buildTypes {
	debug {
		buildConfigField 'boolean', 'ENABLE_ANALYTICS', 'false'
	}
	release {
		buildConfigField 'boolean', 'ENABLE_ANALYTICS', 'true'
	}
}
#+END_SRC   
***  To optimize your APK size, what image codec should you use?
- WebP (Reference)

*** Given an APK named app-internal-debug.apk produced from the build process, which statement is likely to be true?
-  This APK is created from the debug build type and internal product flavor.
** build errors
*** When attempting to build your project, what might the following error indicate?
#+BEGIN_SRC java
Conversion to Dalvik format filed: Unable to execute dex: method ID not in [0, 0xffff]: 65536
#+END_SRC
- You have exceeded the total number of methods that can be referenced within a single DEX file.

* testing
** Why do you use the AndroidJUnitRunner when running UI tests?
- Notice: AndroidJUnitRunner lets us run JUnit3/4-style tests on Android Devices
  - The test runner facilitates loading your test package and the app under test onto a device or emulator, runs the test, and reports the results.
** Given the test class below, which code snippet would be a correct assertion?
#+BEGIN_SRC java
 assertNotNull(resultAdd)    
#+END_SRC


* debugging
** network
*** You have built code to make a network call and tested that it works in your development environment. However, when you publish it to the Play console, the networking call fails to work. What will NOT help you troubleshoot this issue?
- checking whether ProGuard -keepclassmembers have been added to the network data transfer objects (DTOs) in question
- checking for exceptions in the server logs or server console
- checking that the network data transfer object has @SerizlizedName applied to its member properties
- using the profiler tools in Android Studio to detect anomalies in CPU, memory, and network usage (ANSWER: this does not help) 


* Frameworks
** Retrofit
*** You need to remove an Event based on it;s id from your API, Which code snippet defines that request in Retrofit?
  -  @DELETE("events/{id}") fun deleteEvent(@Path("id") id: Long): Call
*** You need to retrieve a list of photos from an API. Which code snippet defines an HTML GET request in Retrofit?
    #+BEGIN_SRC java
 @GET("photo") fun listPhotos() : Call<List>
    #+END_SRC


* éœ€è¦åˆ†ç±»å‡ºå»çš„
*** What are the permission protection levels in Android?
- Normal â€” A lower-risk permission that gives requesting applications access to isolated application-level features, with minimal risk to other applications, the system, or the user. The system automatically grants this type of permission to a requesting application at installation, without asking for the userâ€™s explicit approval.
- Dangerous â€” A higher-risk permission. Any dangerous permissions requested by an application may be displayed to the user and require confirmation before proceeding, or some other approach may be taken to avoid the user automatically allowing the use of such facilities.
- Signature â€” A permission that the system grants only if the requesting application is signed with the same certificate as the application that declared the permission. If the certificates match, the system automatically grants the permission without notifying the user or asking for the userâ€™s explicit approval.
- SignatureOrSystem â€” A permission that the system grants only to applications that are in the Android system image or that are signed with the same certificate as the application that declared the permission.

*** What is Android Data Binding?

The Data Binding Library is a support library that allows you to bind UI components in your layouts to data sources in your app using a declarative format rather than programmatically.

Layouts are often defined in activities with code that calls UI framework methods. For example, the code below calls findViewById() to find a TextView widget and bind it to the userName property of the viewModel variable:

#+BEGIN_SRC java
TextView textView = findViewById(R.id.sample_text);
textView.setText(viewModel.getUserName());
#+END_SRC

The following example shows how to use the Data Binding Library to assign text to the widget directly in the layout file. This removes the need to call any of the Java code shown above.

#+BEGIN_SRC java
<TextView
    android:text="@{viewmodel.userName}" />
#+END_SRC

- The pros of using Android Data Binding:
  - Reduces boilerplate code which in turns brings
  - Less coupling
  - Stronger readability
  - Powerful, easy to implement custom attribute and custom view
  - Even faster than findViewById - The binding does a single pass on the View hierarchy, extracting the Views with IDs. This mechanism can be faster than calling findViewById for several Views.

*** What is the ViewHolder pattern? Why should we use it?

Every time when the adapter calls getView() method, the findViewById() method is also called. This is a very intensive work for the mobile CPU and so affects the performance of the application and the battery consumption increases. ViewHolder is a design pattern which can be applied as a way around repeated use of findViewById().

A ViewHolder holds the reference to the id of the view resource and calls to the resource will not be required after you "find" them: Thus performance of the application increases.
#+BEGIN_SRC java
private static class ViewHolder {
    final TextView text;
    final TextView timestamp;
    final ImageView icon;
    final ProgressBar progress;

    ViewHolder(TextView text, TextView timestamp, ImageView icon, ProgressBar progress) {
        this.text = text;
        this.timestamp = timestamp;
        this.icon = icon;
        this.progress = progress;
    }
}
public View getView(int position, View convertView, ViewGroup parent) {
    View view = convertView;
    if (view == null) {
        view = // inflate new view
        ViewHolder holder = createViewHolderFrom(view);
        view.setTag(holder);  
    }
    ViewHolder holder = view.getTag();
    // TODO: set correct data for this list item
    // holder.icon.setImageDrawable(...)
    // holder.text.setText(...)
    // holder.timestamp.setText(...)
    // holder.progress.setProgress(...)
    return view;
}
private ViewHolder createViewHolderFrom(View view) {
    ImageView icon = (ImageView) view.findViewById(R.id.listitem_image);
    TextView text = (TextView) view.findViewById(R.id.listitem_text);
    TextView timestamp = (TextView) view.findViewById(R.id.listitem_timestamp);
    ProgressBar progress = (ProgressBar) view.findViewById(R.id.progress_spinner);
    return new ViewHolder(text, timestamp, icon, progress);
}
#+END_SRC
- View.setTag(Object) allows you to tell the View to hold an arbitrary object. If we use it to hold an instance of our ViewHolder after we do our findViewById(int) calls, then we can use View.getTag() on recycled views to avoid having to make the calls again and again.

*** What is the difference between Handler vs AsyncTask vs Thread?
Mid 
Top 113 Android Interview Questions  Android  113  
Answer
The Handler class can be used to register to a thread and provides a simple channel to send data to this thread. A Handler allows you communicate back with the UI thread from other background thread.
The AsyncTask class encapsulates the creation of a background process and the synchronization with the main thread. It also supports reporting progress of the running tasks.
And a Thread is basically the core element of multithreading which a developer can use with the following disadvantage:
Handle synchronization with the main thread if you post back results to the user interface
No default for canceling the thread
No default thread pooling
No default for handling configuration changes in Android
Having Tech or Coding Interview? Check ğŸ‘‰ 113 Android Interview Questions
Source: stackoverflow.com
*** What is the difference between compileSdkVersion and targetSdkVersion?
Mid 
Top 113 Android Interview Questions  Android  113  
Answer
The compileSdkVersion is the version of the API the app is compiled against. This means you can use Android API features included in that version of the API (as well as all previous versions, obviously). If you try and use API 16 features but set compileSdkVersion to 15, you will get a compilation error. If you set compileSdkVersion to 16 you can still run the app on a API 15 device as long as your app's execution paths do not attempt to invoke any APIs specific to API 16.

The targetSdkVersion has nothing to do with how your app is compiled or what APIs you can utilize. The targetSdkVersion is supposed to indicate that you have tested your app on (presumably up to and including) the version you specify. This is more like a certification or sign off you are giving the Android OS as a hint to how it should handle your app in terms of OS features.
*** What is the difference between a Bundle and an Intent?
Mid 
Top 113 Android Interview Questions  Android  113  
Answer
A Bundle is a collection of key-value pairs.
However, an Intent is much more. It contains information about an operation that should be performed. This new operation is defined by the action it can be used for, and the data it should show/edit/add. The system uses this information for finding a suitable app component (activity/broadcast/service) for the requested action.
Think of the Intent as a Bundle that also contains information on who should receive the contained data, and how it should be presented.

*** What are the wake locks available in android?
A - PARTIAL_WAKE_LOCK
B - SCREEN_DIM_WAKE_LOCK
C - SCREEN_BRIGHT_WAKE_LOCK
D - FULL_WAKE_LOCK
E - FULL_WAKE_LOCK
Answer : E
Explanation
When CPU is on mode, PARTIAL_WAKE_LOCK will be active.

When CPU + bright Screen low is on mode, SCREEN_DIM_WAKE_LOCK will be active.

When CPU + bright Screen High is on mode,SCREEN_BRIGHT_WAKE_LOCK will be active.

When CPU, Screen, bright Screen High is on mode, FULL_WAKE_LOCK will be active.


* é¡¹ç›®ä¸­ç”¨åˆ°çš„å°ç‚¹
** api level 28, androidxä¹‹å‰çš„æœ€åä¸€ä¸ªç‰ˆæœ¬

** android api level 30 androidx ä¸­é¡¹ç›®ä¸€å®šéœ€è¦ä¿®æ”¹çš„æ¡æ¬¾: androidx.fragmentè¿˜æ²¡æœ‰å¼„é€š
*** gradles.propertiess
#+BEGIN_SRC xm
android.useAndroidX=true
landroid.enableJetifier=true 
#+END_SRC
*** project build.gragle: gragle versions
*** app module build.gradle
#+BEGIN_SRC .gradle
   implementation 'androidx.appcompat:appcompat:1.1.0'
    //implementation 'com.android.support:appcompat-v7:30.0.0'
    implementation 'com.android.support.constraint:constraint-layout:2.0.4'
    implementation 'com.android.support:design:30.0.0'
    testImplementation 'junit:junit:4.12'
    androidTestImplementation 'com.android.support.test:runner:1.0.2'
    androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.2'
#+END_SRC
-  ä»€ä¹ˆæ˜¯Jetifierï¼Ÿ ä¾‹å¦‚ï¼Œè¦ä½¿ç”¨androidxæ‰“åŒ…çš„ä¾èµ–é¡¹åˆ›å»ºæ–°é¡¹ç›®ï¼Œæ­¤æ–°é¡¹ç›®éœ€è¦åœ¨gradle.propertiesæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹è¡Œï¼š
*** JavaVersion.VERSION_1_8
#+BEGIN_SRC java
java version 8
 compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
#+END_SRC
*** references
#+BEGIN_SRC java
import android.content.Context;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.Menu;
import android.view.MenuItem;
import androidx.fragment.app.Fragment;
import androidx.annotation.Nullable;
import androidx.appcompat.app.AppCompatActivity;
import androidx.appcompat.widget.Toolbar;
import android.support.design.widget.FloatingActionButton;
import android.support.design.widget.Snackbar;
import com.google.android.material.floatingactionbutton.FloatingActionButton;
import com.google.android.material.snackbar.Snackbar;
#+END_SRC
*** xmlä¸­ä¹Ÿè¿˜æœ‰ä¸€äº›æ³¨æ„äº‹é¡¹
    #+BEGIN_SRC xml
    <com.me.generalprac.CustomTitleView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"/>
    <include layout="@layout/custom_title"/>
    #+END_SRC
    

